(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-008f53cc"],{3788:function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return n}))},"46fb":function(t,e,a){},"5eec":function(t,e,a){"use strict";a("46fb")},8816:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{style:{display:"mp"===t.$store.state.platform?"none":""},attrs:{title:"工时提交","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.goBack()}}}),e("div",{staticClass:"content"},[e("div",{staticClass:"act_info_card"},[e("van-cell",{attrs:{title:"活动信息",icon:"label-o"}}),e("van-field",{attrs:{label:"活动名称",readonly:"","input-align":"right"},model:{value:t.actData.activityName,callback:function(e){t.$set(t.actData,"activityName",e)},expression:"actData.activityName"}}),e("van-field",{attrs:{label:"活动日期",readonly:"","input-align":"right"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),e("van-field",{attrs:{label:"活动负责人",readonly:"","input-align":"right"},model:{value:t.actData.crater,callback:function(e){t.$set(t.actData,"crater",e)},expression:"actData.crater"}})],1),e("div",{staticClass:"select_hour_card"},[e("div",[e("van-cell",{attrs:{title:"选择工时",icon:"certificate"}})],1),e("div",{staticClass:"wrap"},t._l(t.volunteerTimes,(function(a,n){return e("div",{key:n,staticClass:"btns"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.actData.volunteerTime,expression:"actData.volunteerTime"}],attrs:{type:"radio"},domProps:{value:a,checked:t._q(t.actData.volunteerTime,a)},on:{change:function(e){return t.$set(t.actData,"volunteerTime",a)}}}),e("span",[t._v(t._s(a)+"h")])])})),0)]),e("div",{staticClass:"confirm_btn"},[e("van-row",{attrs:{type:"flex",justify:"center"}},[e("van-button",{attrs:{round:"",block:"",type:"info"},on:{click:function(e){t.confirmDialogShow=!0}}},[t._v("提交工时")])],1)],1)]),e("van-dialog",{staticClass:"confirm_dialog",attrs:{title:"信息确认","show-cancel-button":""},on:{confirm:function(e){return t.confirmApproveAct()}},model:{value:t.confirmDialogShow,callback:function(e){t.confirmDialogShow=e},expression:"confirmDialogShow"}},[e("van-cell-group",[e("van-field",{attrs:{label:"学号",readonly:""},model:{value:t.userInfo.studentNum,callback:function(e){t.$set(t.userInfo,"studentNum",e)},expression:"userInfo.studentNum"}}),e("van-field",{attrs:{label:"活动名称",readonly:""},model:{value:t.actData.activityName,callback:function(e){t.$set(t.actData,"activityName",e)},expression:"actData.activityName"}}),e("van-field",{attrs:{label:"活动工时",readonly:""},model:{value:t.actData.volunteerTime,callback:function(e){t.$set(t.actData,"volunteerTime",e)},expression:"actData.volunteerTime"}})],1)],1)],1)},r=[],i=a("758a"),c=a("2aab"),o=a("94ad"),s=a("3788"),u=(a("3849"),a("4360")),l=a("0c6d");function f(t){return Object(l["a"])({url:"/public/activityContent",method:"GET",params:{activityId:t}})}function d(t){return Object(l["a"])({url:"/volunteer/public/time",method:"POST",data:t,headers:{token:u["a"].state.volunteerToken}})}var m=a("7736"),v={data:function(){return{actData:Object(s["a"])({id:"",activityName:"",crater:this.$route.params.crater,volunteerTime:""},"activityName",this.$route.params.activityName),date:this.$route.params.participateDate,activityId:this.$route.params.activityId,sheetId:this.$route.params.sheetId,randomString:this.$route.params.randomString,volunteerTimes:this.$route.params.volunteerTimes.sort(),confirmDialogShow:!1}},name:"ApproveAct",computed:Object(o["a"])({},Object(m["c"])(["userInfo","platform"])),mounted:function(){this.honestAgreement()},methods:{test:function(){},goBack:function(){this.$router.go(-1)},onSubmit:function(t){},onConfirm:function(t){this.actData.volunteerTime=t,this.showPicker=!1},honestAgreement:function(){this.$dialog.alert({title:"诚信协议",message:"<div>我承诺:诚信参与志愿服务活动，所选择工时数为本人此次活动<b>真实的</b>服务时长</div><div>我同意:公开我的志愿服务时长和活动记录等信息，以配合广大志愿者和学校对诚信志愿的监督与核查！</div>",confirmButtonColor:"#006eff",allowHtml:!0})},getActDetail:function(){var t=this;return Object(c["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(t.$route.params.activityId);case 2:a=e.sent,t.actData=a.data,t.actData.crater=t.$route.params.crater;case 5:case"end":return e.stop()}}),e)})))()},confirmApproveAct:function(){var t=this;return Object(c["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=new FormData,a.append("volunteerTime",t.actData.volunteerTime),a.append("randomString",t.$route.params.randomString),t,""!==t.actData.volunteerTime){e.next=7;break}return t.$toast("未选择活动工时,请重新选择！"),e.abrupt("return");case 7:return e.next=9,d(a).then((function(e){0===e.code?t.$store.dispatch("doSetActList").then((function(e){t.$store.dispatch("doSetHourView").then((function(e){t.$toast({message:"提交成功!"}),setTimeout((function(){t.$router.go(-1)}),1500)}))})).catch((function(t){})):t.$toast({message:e.msg})}));case 9:case"end":return e.stop()}}),e)})))()}}},p=v,b=(a("5eec"),a("0b56")),h=Object(b["a"])(p,n,r,!1,null,"1f02ef98",null);e["default"]=h.exports},"94ad":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("dad5"),a("6073"),a("cd5d"),a("c5cb"),a("0ffc"),a("4e3f"),a("08c7"),a("9aed");var n=a("3788");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}}}]);